# Polymarket åšå¸‚ç­–ç•¥ - å®Œæ•´ä»£ç å®¡æŸ¥æŠ¥å‘Š

**å®¡æŸ¥æ—¶é—´**: 2026-01-29
**å®¡æŸ¥èŒƒå›´**: ç­–ç•¥ä»£ç ã€é…ç½®ã€é£é™©æ§åˆ¶ã€API é›†æˆ

---

## ğŸ“‹ æ‰§è¡Œæ‘˜è¦

### âœ… ä¼˜ç‚¹
1. **æ¶æ„ä¼˜ç§€**: æ­£ç¡®ä½¿ç”¨ NautilusTrader æ¡†æ¶
2. **é£é™©ç®¡ç†**: å¤šå±‚é£é™©æ£€æŸ¥æœºåˆ¶
3. **ä»£ç è´¨é‡**: æ¸…æ™°çš„æ³¨é‡Šå’Œæ¨¡å—åŒ–è®¾è®¡

### âš ï¸ å…³é”®é—®é¢˜
1. **ğŸ”´ ä¸¥é‡ï¼šç›®æ ‡å¸‚åœºå·²è¿‡æœŸ**
2. **ğŸŸ¡ ä¸­ç­‰ï¼šè®¢å•ç±»å‹é…ç½®å¯èƒ½ä¸é€‚åˆåšå¸‚**
3. **ğŸŸ¢ è½»å¾®ï¼šé…ç½®å‚æ•°è¿‡äºä¿å®ˆ**

---

## 1. ç­–ç•¥æ¶æ„å®¡æŸ¥

### 1.1 æ¡†æ¶ä½¿ç”¨ âœ…

```python
# æ­£ç¡®ç»§æ‰¿ NautilusTrader Strategy
class BaseStrategy(Strategy):
    # âœ… ä½¿ç”¨ Portfolio ç®¡ç†ä»“ä½
    # âœ… ä½¿ç”¨ Cache è·å–æ•°æ®
    # âœ… ä½¿ç”¨ RiskEngine é£é™©æ£€æŸ¥
```

**è¯„ä»·**: æ¶æ„è®¾è®¡åˆç†ï¼Œå……åˆ†åˆ©ç”¨äº†æ¡†æ¶èƒ½åŠ›ã€‚

### 1.2 åšå¸‚é€»è¾‘ âœ…

æ ¸å¿ƒé€»è¾‘ï¼ˆstrategies/market_making_strategy.py:116-175ï¼‰:
```python
def on_order_book(self, order_book):
    1. æ£€æŸ¥æ›´æ–°é—´éš”
    2. é£é™©æ£€æŸ¥ï¼ˆ5 å±‚ï¼‰
    3. è·å–ä¸­é—´ä»·
    4. è®¡ç®—åŠ¨æ€ä»·å·®
    5. è®¡ç®—åº“å­˜å€¾æ–œ
    6. æäº¤ OCO è®¢å•ï¼ˆä¹°å•+å–å•ï¼‰
```

**è¯„ä»·**: æ ‡å‡†çš„åšå¸‚ç­–ç•¥å®ç°ï¼Œé€»è¾‘æ¸…æ™°ã€‚

---

## 2. ğŸš¨ å…³é”®é—®é¢˜

### 2.1 ç›®æ ‡å¸‚åœºå·²è¿‡æœŸ ğŸ”´

**æ–‡ä»¶**: run_market_making_safe.py:125

```python
target_slug = "bitcoin-up-or-down-on-january-28"
```

**é—®é¢˜**:
- ä»Šå¤©æ˜¯ **2026-01-29**
- å¸‚åœºäº‹ä»¶æ—¥æœŸæ˜¯ **1-28**
- **å¸‚åœºå·²è¿‡æœŸï¼**

**å½±å“**:
- è®¢å•ä¸ä¼šæˆäº¤
- ç­–ç•¥æ— æ³•æ­£å¸¸è¿è¡Œ
- å³ä½¿è¿è¡Œä¹Ÿæ— æ„ä¹‰

**è§£å†³æ–¹æ¡ˆ**:

```python
# éœ€è¦æ›´æ–°ä¸ºæ´»è·ƒå¸‚åœº
target_slug = "bitcoin-price-january-31-2026"  # ç¤ºä¾‹

# æˆ–è€…ä» Polymarket æŸ¥æ‰¾å½“å‰æ´»è·ƒçš„äºŒå…ƒæœŸæƒå¸‚åœº
```

### 2.2 è®¢å•ç±»å‹é…ç½®é—®é¢˜ ğŸŸ¡

**æ–‡ä»¶**: strategies/market_making_strategy.py:206, 216

```python
time_in_force=TimeInForce.IOC,  # IOC: Immediate-Or-Cancel
```

**é—®é¢˜åˆ†æ**:
- **IOC (Immediate-Or-Cancel)**: ç«‹å³æˆäº¤ï¼Œå¦åˆ™å–æ¶ˆ
- **åšå¸‚ç­–ç•¥**: éœ€è¦è®¢å•ç•™åœ¨è®¢å•ç°¿ä¸Šç­‰å¾…æˆäº¤
- **çŸ›ç›¾**: IOC è®¢å•ä¸ä¼šç•™åœ¨è®¢å•ç°¿ä¸Š

**å®é™…æ•ˆæœ**:
```
IOC è®¢å•æµç¨‹:
1. æäº¤ä¹°å• â†’ ç«‹å³æ£€æŸ¥ â†’ å¦‚æœæ²¡æœ‰åŒ¹é…çš„å–å• â†’ å–æ¶ˆ
2. æäº¤å–å• â†’ ç«‹å³æ£€æŸ¥ â†’ å¦‚æœæ²¡æœ‰åŒ¹é…çš„ä¹°å• â†’ å–æ¶ˆ
3. ç»“æœï¼šå¤§éƒ¨åˆ†è®¢å•è¢«å–æ¶ˆï¼Œæˆäº¤ç‡æä½
```

**å»ºè®®ä¿®æ”¹**:

```python
# é€‰é¡¹ 1: ä½¿ç”¨ GTC (Good-Til-Cancelled)
time_in_force=TimeInForce.GTC,
post_only=True,  # åªåš Makerï¼Œä¸ç«‹å³æˆäº¤

# é€‰é¡¹ 2: ä½¿ç”¨ FOK (Fill-Or-Kill)
time_in_force=TimeInForce.FOK,
post_only=False,  # å…è®¸ç«‹å³æˆäº¤
```

### 2.3 OCO + IOC ç»„åˆé—®é¢˜ ğŸŸ¡

**æ–‡ä»¶**: strategies/market_making_strategy.py:219-220

```python
# ä½¿ç”¨ OCOï¼šä¸€ä¸ªæˆäº¤ï¼Œå–æ¶ˆå¦ä¸€ä¸ª
self.submit_oco_orders(buy_order, sell_order)
```

**é—®é¢˜**:
- OCO ç”¨äº"ä¸€ä¸ªæˆäº¤ï¼Œå–æ¶ˆå¦ä¸€ä¸ª"
- ä½† IOC è®¢å•æœ¬èº«å°±æ˜¯"ç«‹å³æˆäº¤æˆ–å–æ¶ˆ"
- ç»„åˆä½¿ç”¨æ„ä¹‰ä¸å¤§

**å»ºè®®**:
```python
# æ–¹æ¡ˆ 1: åˆ†åˆ«æäº¤ï¼ˆæ¨èï¼‰
self.submit_order(buy_order)
self.submit_order(sell_order)

# æ–¹æ¡ˆ 2: å¦‚æœç”¨ GTCï¼Œä¿ç•™ OCO
time_in_force=TimeInForce.GTC
self.submit_oco_orders(buy_order, sell_order)
```

---

## 3. é…ç½®å‚æ•°å®¡æŸ¥

### 3.1 å°èµ„é‡‘å®‰å…¨é…ç½® ğŸŸ¢

**æ–‡ä»¶**: run_market_making_safe.py:195-218

```python
# å½“å‰é…ç½®
order_size=1                    # æ¯å• 1 ä¸ª
base_spread=Decimal("0.05")     # 5% ä»·å·®
max_inventory=5                 # æœ€å¤§åº“å­˜ 5 ä¸ª
max_daily_loss=Decimal("-1.0")  # æ—¥äºæŸ 1 USDC
```

**åˆ†æ**:

| å‚æ•° | å½“å‰å€¼ | è¯„ä»· | å»ºè®® |
|------|--------|------|------|
| order_size | 1 ä¸ª | âœ… åˆç† | ä¿æŒ |
| base_spread | 5% | âš ï¸ è¿‡å¤§ | 2-3% |
| max_inventory | 5 ä¸ª | âœ… åˆç† | ä¿æŒ |
| max_daily_loss | -1 USDC | âœ… å®‰å…¨ | ä¿æŒ |

**ä»·å·®é—®é¢˜**:
- Polymarket äºŒå…ƒæœŸæƒå…¸å‹ä»·å·®: 1-3%
- å½“å‰ 5% ä»·å·®å¯èƒ½è¿‡å¤§
- **è¿‡å¤§ä»·å·® â†’ è®¢å•è¿œç¦»ä¸­é—´ä»· â†’ æˆäº¤ç‡ä½**

**å»ºè®®**:
```python
base_spread=Decimal("0.02"),     # 2% åŸºç¡€ä»·å·®
min_spread=Decimal("0.01"),      # 1% æœ€å°
max_spread=Decimal("0.10"),      # 10% æœ€å¤§ï¼ˆé«˜æ³¢åŠ¨æ—¶ï¼‰
```

### 3.2 é£é™©æ§åˆ¶ âœ…

**å¤šå±‚é£é™©æ£€æŸ¥**ï¼ˆstrategies/market_making_strategy.py:308-407ï¼‰:

1. âœ… ä»·æ ¼èŒƒå›´æ£€æŸ¥ (5%-95%)
2. âœ… æ³¢åŠ¨ç‡é™åˆ¶ (8%)
3. âœ… åº“å­˜é™åˆ¶ (5 ä¸ª)
4. âœ… ä»“ä½é™åˆ¶ (50% èµ„é‡‘)
5. âœ… æ—¥äºæŸé™åˆ¶ (-1 USDC)

**è¯„ä»·**: é£é™©æ§åˆ¶æœºåˆ¶å®Œå–„ï¼Œå°èµ„é‡‘æµ‹è¯•é…ç½®å®‰å…¨ã€‚

---

## 4. API é›†æˆå®¡æŸ¥

### 4.1 è®¤è¯é…ç½® âœ…

**æ–‡ä»¶**: run_market_making_safe.py:248-254

```python
exec_client_config = PolymarketExecClientConfig(
    private_key=private_key,
    signature_type=2,  # âœ… Magic Wallet ä½¿ç”¨ type 2
    api_key=api_key or "",
    api_secret=api_secret or "",
    passphrase=passphrase or "",
)
```

**è¯„ä»·**: é…ç½®æ­£ç¡®ã€‚

### 4.2 ç¯å¢ƒå˜é‡åŠ è½½ âœ…

**æ–‡ä»¶**: run_market_making_safe.py:26-63

```python
# 1. ä¼˜å…ˆä»ç¯å¢ƒå˜é‡è¯»å–ï¼ˆZeaburï¼‰
env_vars['private_key'] = os.getenv("POLYMARKET_PK")
# 2. å›é€€åˆ° .env æ–‡ä»¶
```

**è¯„ä»·**: å…¼å®¹æœ¬åœ°å’Œäº‘ç«¯éƒ¨ç½²ã€‚

### 4.3 é’±åŒ…åœ°å€é—®é¢˜ âš ï¸

**å½“å‰çŠ¶æ€**:
- .env ç§é’¥: `0xed29879...7b1feb`
- py_clob_client éªŒè¯åœ°å€: `0x852cE0...8D8e`
- ç”¨æˆ·å……å€¼åœ°å€ï¼ˆæˆªå›¾ï¼‰: `0x18Ddc...CD2d`

**é—®é¢˜**: åœ°å€ä¸åŒ¹é…

**å¯èƒ½åŸå› **:
1. py_clob_client.get_address() æ–¹æ³•ä¸å‡†ç¡®
2. å……å€¼åœ°å€å’Œ Magic Wallet åœ°å€ä¸åŒ
3. ç”¨æˆ·å¤åˆ¶äº†é”™è¯¯çš„ç§é’¥

**å»ºè®®**:
- å…ˆç”¨å°é‡‘é¢æµ‹è¯•ï¼ˆ< 5 USDCï¼‰
- è§‚å¯Ÿæ—¥å¿—ä¸­æ˜¾ç¤ºçš„é’±åŒ…åœ°å€
- å¦‚æœäº¤æ˜“å¤±è´¥ï¼Œé‡æ–°è·å–ç§é’¥

---

## 5. ç­–ç•¥é€»è¾‘åˆ†æ

### 5.1 åšå¸‚åŸç† âœ…

```
æ ‡å‡†åšå¸‚ç­–ç•¥:
1. æŒ‚ä¹°å•ï¼ˆä½äºä¸­é—´ä»·ï¼‰
2. æŒ‚å–å•ï¼ˆé«˜äºä¸­é—´ä»·ï¼‰
3. èµšå–ä»·å·®

ç¤ºä¾‹:
ä¸­é—´ä»·: 0.50
ä¹°ä»·: 0.49 (-2%)
å–ä»·: 0.51 (+2%)

åˆ©æ¶¦: 0.51 - 0.49 = 0.02 (4% ä»·å·®)
```

**è¯„ä»·**: ç­–ç•¥åŸç†æ­£ç¡®ã€‚

### 5.2 åº“å­˜ç®¡ç† âœ…

**æ–‡ä»¶**: strategies/market_making_strategy.py:241-261

```python
def _calculate_inventory_skew(self):
    # æŒæœ‰è¿‡å¤š YES â†’ é™ä½ä¹°ä»·ï¼Œæé«˜å–ä»· â†’ é¼“åŠ±å–å‡º
    # æŒæœ‰è¿‡å¤š NO â†’ æé«˜ä¹°ä»·ï¼Œé™ä½å–ä»· â†’ é¼“åŠ±ä¹°å…¥
```

**è¯„ä»·**: æ­£ç¡®çš„åº“å­˜ç®¡ç†é€»è¾‘ã€‚

### 5.3 åŠ¨æ€ä»·å·® âœ…

**æ–‡ä»¶**: strategies/market_making_strategy.py:224-239

```python
def _calculate_dynamic_spread(self, order_book):
    # é«˜æ³¢åŠ¨ â†’ æ‰©å¤§ä»·å·®
    # ä½æ³¢åŠ¨ â†’ ç¼©å°ä»·å·®
```

**è¯„ä»·**: åˆç†çš„é£é™©è°ƒæ•´æœºåˆ¶ã€‚

---

## 6. æ½œåœ¨é£é™©

### 6.1 å¸‚åœºé£é™© ğŸŸ¡

**é—®é¢˜**:
- äºŒå…ƒæœŸæƒåˆ°æœŸå½’é›¶æˆ–å½’ä¸€
- å¦‚æœäº‹ä»¶å·²å‘ç”Ÿï¼Œå¸‚åœºä¼šå…³é—­

**å½“å‰é—®é¢˜**: ç›®æ ‡å¸‚åœºå·²è¿‡æœŸ

### 6.2 æµåŠ¨æ€§é£é™© ğŸŸ¡

**é—®é¢˜**:
- Polymarket å°å¸‚åœºæµåŠ¨æ€§å¯èƒ½ä¸è¶³
- è®¢å•å¯èƒ½æ— æ³•æˆäº¤

**ç¼“è§£**:
```python
# å·²å®ç°
order_size=1  # å°è®¢å•ï¼Œå®¹æ˜“æˆäº¤
```

### 6.3 æŠ€æœ¯é£é™© ğŸŸ¢

**ç½‘ç»œä¸­æ–­**:
- Zeabur ç½‘ç»œç¨³å®š
- 5 ç§’æ›´æ–°é—´éš”é™ä½ç½‘ç»œè¦æ±‚

**API é™åˆ¶**:
- ä½¿ç”¨ L2 è®¤è¯ï¼Œé™åˆ¶è¾ƒå°‘

---

## 7. ä¿®æ”¹å»ºè®®ä¼˜å…ˆçº§

### ğŸ”´ é«˜ä¼˜å…ˆçº§ï¼ˆå¿…é¡»ä¿®å¤ï¼‰

1. **æ›´æ–°ç›®æ ‡å¸‚åœº**
   ```python
   # å½“å‰: bitcoin-up-or-down-on-january-28 (å·²è¿‡æœŸ)
   # æ”¹ä¸º: æ´»è·ƒçš„å¸‚åœº
   ```

2. **ä¿®æ”¹è®¢å•ç±»å‹**
   ```python
   # å½“å‰: IOC (ç«‹å³æˆäº¤æˆ–å–æ¶ˆ)
   # æ”¹ä¸º: GTC + post_only (æŒ‚å•ç­‰å¾…æˆäº¤)
   ```

### ğŸŸ¡ ä¸­ä¼˜å…ˆçº§ï¼ˆå»ºè®®ä¿®æ”¹ï¼‰

3. **è°ƒæ•´ä»·å·®å‚æ•°**
   ```python
   base_spread: 5% â†’ 2%
   min_spread: 3% â†’ 1%
   ```

4. **ç§»é™¤ OCOï¼ˆå¦‚æœä½¿ç”¨ IOCï¼‰**
   ```python
   # IOC + OCO ç»„åˆæ„ä¹‰ä¸å¤§
   # æ”¹ä¸ºåˆ†åˆ«æäº¤è®¢å•
   ```

### ğŸŸ¢ ä½ä¼˜å…ˆçº§ï¼ˆå¯é€‰ä¼˜åŒ–ï¼‰

5. **å¢åŠ å¸‚åœºæ´»è·ƒåº¦æ£€æŸ¥**
6. **æ·»åŠ æ›´è¯¦ç»†çš„æ—¥å¿—**
7. **ä¼˜åŒ–ä»·æ ¼å†å²ç®¡ç†**

---

## 8. éƒ¨ç½²æ£€æŸ¥æ¸…å•

### éƒ¨ç½²å‰å¿…é¡»ç¡®è®¤ï¼š

- [ ] âœ… API å‡­è¯å·²ç”Ÿæˆ
- [ ] âœ… .env æ–‡ä»¶é…ç½®æ­£ç¡®
- [ ] âœ… ä»£ç å·²æ¨é€åˆ° GitHub
- [ ] ğŸ”´ **ç›®æ ‡å¸‚åœºæ›´æ–°ä¸ºæ´»è·ƒå¸‚åœº**
- [ ] ğŸ”´ **è®¢å•ç±»å‹ä¿®æ”¹ä¸º GTC**
- [ ] ğŸŸ¡ **ä»·å·®å‚æ•°è°ƒæ•´ä¸º 2%**
- [ ] âš ï¸ **é’±åŒ…åœ°å€ç¡®è®¤ï¼ˆå…ˆå°é‡‘é¢æµ‹è¯•ï¼‰**

### Zeabur ç¯å¢ƒå˜é‡ï¼š

```bash
POLYMARKET_PK=0xed298792ddcc1e6348a934214fa563324800bfa72ac58fc066ea4ba8a17b1feb
POLYMARKET_API_KEY=e66cd14b-997d-2da4-e2f6-a5c1d411d23a
POLYMARKET_API_SECRET=Hl_DkIvovhSyzOFXamQICLJFpQIkBpSXDMGLQZCb3_c=
POLYMARKET_PASSPHRASE=d29d194faaf7dac6d3dc5f3165b9251117945f43d60261c8b833494afbe4c1c4
```

---

## 9. æ€»ç»“

### æ•´ä½“è¯„ä»·: â­â­â­â­â˜† (4/5)

**ä¼˜ç‚¹**:
- âœ… æ¶æ„è®¾è®¡ä¼˜ç§€
- âœ… é£é™©æ§åˆ¶å®Œå–„
- âœ… ä»£ç è´¨é‡é«˜
- âœ… æ³¨é‡Šæ¸…æ™°

**å…³é”®é—®é¢˜**:
- ğŸ”´ ç›®æ ‡å¸‚åœºå·²è¿‡æœŸï¼ˆå¿…é¡»ä¿®å¤ï¼‰
- ğŸŸ¡ è®¢å•ç±»å‹é…ç½®ä¸å½“ï¼ˆå»ºè®®ä¿®æ”¹ï¼‰

### å»ºè®®:

1. **ç«‹å³ä¿®å¤å¸‚åœºé—®é¢˜** - æ›´æ–°ä¸ºæ´»è·ƒå¸‚åœº
2. **è°ƒæ•´è®¢å•ç±»å‹** - æ”¹ç”¨ GTC + post_only
3. **é™ä½ä»·å·®** - ä» 5% é™åˆ° 2%
4. **å°é‡‘é¢æµ‹è¯•** - å…ˆç”¨ 5 USDC æµ‹è¯• 1-2 å°æ—¶
5. **è§‚å¯Ÿæ—¥å¿—** - ç¡®è®¤é’±åŒ…åœ°å€å’Œè®¢å•çŠ¶æ€

### é¢„æœŸè¡¨ç°ï¼ˆä¿®å¤åï¼‰:

```
é…ç½®: 5-10 USDC
ä»·å·®: 2%
é¢„æœŸæ—¥æ”¶ç›Š: 0.5-1 USDC
é£é™©: æœ€å¤§äºæŸ 1 USDC
æˆäº¤ç‡: 10-30%ï¼ˆå–å†³äºå¸‚åœºæ´»è·ƒåº¦ï¼‰
```

---

**å®¡æŸ¥äºº**: Claude (Sonnet 4.5)
**å®¡æŸ¥æ—¥æœŸ**: 2026-01-29
**çŠ¶æ€**: âš ï¸ éœ€è¦ä¿®å¤å…³é”®é—®é¢˜åæ‰èƒ½éƒ¨ç½²
